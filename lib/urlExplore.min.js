(()=>{const e=new Event("url-update"),t=new Event("url-change"),n={chronology:[]};let l=()=>{let l=window.location.href,o={...n};delete o.chronology,n.full=decodeURIComponent(l),n.scheme=n.full.split(":")[0],n.authority=n.full.split("/")[2],n.path="/"+n.full.split("?")[0].split("/").slice(3).join("/"),n.query=(()=>{let e=l.split("#")[0].split("?").slice(1).join("?");if(void 0===e)return{};let t=e.split("&"),n={};return t.forEach(function(e){let t=e.split("="),l=decodeURIComponent(t.shift()),o=decodeURIComponent(t.join("="));l.length>0&&(o.length>0?n[l]=o:n[l]=!0)}),n})(),n.fragment=(()=>{let e=l.split("#")[1];return void 0===e?null:decodeURIComponent(e)})(),window.dispatchEvent(e),o.full!==n.full&&(window.dispatchEvent(t),Object.keys(o).length>0&&n.chronology.unshift(o))};l(),Object.defineProperty(window,"url",{get:()=>n,set:e=>window.location.href=e}),window.addEventListener("popstate",l)})();