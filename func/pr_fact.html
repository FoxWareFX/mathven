<section title="Prime Factorization">
    <input placeholder="positive number" type="number" min="0" id="in">
    <br>
    <button id="calc" onclick="calc($('#in').val())">Calculate</button>
    <pre id="res"></pre>

    <script>
        function isPrime(n) {
            for(let i = 2; i < n; i++)
                if(n % i === 0) return false;
            return n > 1;
        }

        function calc(n) {
            let nLen = n.toString().length;
            let res = "", mul = "", mulU = "";
            let fct = [], uFct = { };

            while(n > 1) {
                for(let i = 2; i <= n; i++) {
                    if(!isPrime(i))
                        continue;

                    if(n % i === 0) {
                        //FSP is used as space
                        res += n.toString().padStart(nLen, " ") + " │ " + i + "\n";

                        fct.push(i);

                        n /= i;
                    }
                }
            }

            res += (1).toString().padStart(nLen, " ") + " │ " + "\n\n";

            fct.sort((a, b) => a - b);

            fct.forEach(function (x) {
                mul += (mul === ""? "" : " x ") + x;

                if(!uFct.hasOwnProperty(x))
                    uFct[x] = 0;
                uFct[x] += 1;
            });
            for(let k in uFct) {
                let v = uFct[k];

                mulU += (mulU === ""? "" : " x ") + k + (v > 1? "<sup>" + v + "</sup>" : "");
            }

            res += mul + (mul !== mulU? " = " + mulU : "");

            $("#res").html(res);
        }
    </script>
</section>